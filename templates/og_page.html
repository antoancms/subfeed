<!-- templates/og_page.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta property="og:title" content="{{ title }}">
    <meta property="og:description" content="{{ desc }}">
    <meta property="og:image" content="{{ image }}">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="{{ request.url }}">
    <title>{{ title }}</title>

    <!-- Instant redirect for users; bots will ignore JS and scrape OG tags -->
    <script>
        if (!navigator.userAgent.includes('facebookexternalhit') &&
            !navigator.userAgent.includes('Twitterbot') &&
            !navigator.userAgent.includes('Slackbot')) {
            window.location.replace("{{ url }}");
        }
    </script>
</head>
<body>
    <noscript>
        <meta http-equiv="refresh" content="2;url={{ url }}">
        <p>Redirecting to <a href="{{ url }}">{{ url }}</a>...</p>
    </noscript>

    <div style="text-align:center; margin-top: 100px; font-family: Arial;">
        <h2>‚úÖ Your custom preview link is ready!</h2>
        <p>Share or copy this link:</p>
        <input type="text" id="share-url" value="{{ request.url }}" readonly style="width: 80%; padding: 10px; font-size: 16px;">
        <br><br>
        <button onclick="copyLink()" style="padding: 10px 20px; font-size: 16px;">üìã Copy</button>
        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.url }}" target="_blank" style="margin-left: 10px;">üîó Share on Facebook</a>
        <a href="https://twitter.com/intent/tweet?url={{ request.url }}" target="_blank" style="margin-left: 10px;">üê¶ Tweet</a>
    </div>

    <script>
        function copyLink() {
            var copyText = document.getElementById("share-url");
            copyText.select();
            copyText.setSelectionRange(0, 99999); // For mobile
            document.execCommand("copy");
            alert("Copied the link: " + copyText.value);
        }
    </script>
</body>
</html>
